* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    background: #0a0a0a;
    font-family: 'Segoe UI', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    overflow-y: auto;
    color: white;
    padding-top: 20px;
    padding-bottom: 20px;
  }
  
  .game-wrapper {
    text-align: center;
    z-index: 100;
  }
  
  h1 {
    margin-bottom: 10px;
    color: #00ffcc;
    text-shadow: 0 0 10px #00ffcc;
  }
  
  #game {
    position: relative;
    width: 500px;
    height: 700px;
    border: 3px solid #00ffcc;
    background: linear-gradient(to bottom, #0c0c1d, #131826); /* Dark space blue base */
    overflow: hidden;
    border-radius: 10px;
    transition: background 0.5s ease-in-out; /* Re-added for smoother background changes */
  }
  
  @keyframes moveStars {
    0%   { background-position: 0 0; }
    100% { background-position: 0 100%; }
  }
  
  .stars {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 200%; /* Taller than game area to allow seamless scrolling */
    pointer-events: none; /* So they don't interfere with gameplay */
    z-index: 1; /* Behind game elements but above #game background */
  }
  
  .stars-far {
    background-image: 
      radial-gradient(1px 1px at 20px 30px, white, transparent),
      radial-gradient(1px 1px at 80px 100px, white, transparent),
      radial-gradient(0.5px 0.5px at 150px 70px, white, transparent),
      radial-gradient(1px 1px at 250px 180px, white, transparent),
      radial-gradient(0.5px 0.5px at 320px 50px, white, transparent),
      radial-gradient(1px 1px at 400px 120px, white, transparent),
      radial-gradient(0.5px 0.5px at 480px 220px, white, transparent);
    background-repeat: repeat;
    background-size: 500px 250px; /* Size of the repeatable tile */
    animation: moveStars 120s linear infinite;
    opacity: 0.6;
  }
  
  .stars-mid {
    background-image: 
      radial-gradient(1.5px 1.5px at 50px 80px, white, transparent),
      radial-gradient(1px 1px at 120px 150px, white, transparent),
      radial-gradient(1.5px 1.5px at 220px 30px, white, transparent),
      radial-gradient(1px 1px at 300px 200px, white, transparent),
      radial-gradient(1.5px 1.5px at 450px 100px, white, transparent);
    background-repeat: repeat;
    background-size: 500px 250px;
    animation: moveStars 80s linear infinite;
    opacity: 0.8;
  }
  
  .stars-near {
    background-image: 
      radial-gradient(2px 2px at 70px 50px, white, transparent),
      radial-gradient(1.5px 1.5px at 180px 180px, white, transparent),
      radial-gradient(2.5px 2.5px at 350px 120px, white, transparent),
      radial-gradient(2px 2px at 420px 230px, white, transparent);
    background-repeat: repeat;
    background-size: 500px 250px;
    animation: moveStars 40s linear infinite;
    opacity: 1;
  }
  
  #player {
    position: absolute;
    bottom: 20px;
    width: 80px;
    height: 20px;
    background: #00ffcc; /* Default player appearance */
    left: 160px;
    border-radius: 5px;
    transition: background 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease; /* Smooth transitions for skin changes */
  }
  
  /* Neon Blue Core Skin */
  .skin-neonBlueCore {
    background: #0077ff !important; /* Bright blue */
    border: 2px solid #00ffff !important;
    box-shadow: 0 0 8px #00ffff, 0 0 12px #0077ff !important;
  }
  
  /* Plasma Gold Trail Skin */
  .skin-plasmaGoldTrail {
    background: linear-gradient(45deg, #FFD700, #FFA500) !important; /* Gold to Orange gradient */
    border: 2px solid #FF8C00 !important;
    box-shadow: 0 0 8px #FFA500, 0 0 12px #FFD700 !important;
    /* Note: The "Trail" part of the name might imply a particle effect later, this is just board style */
  }
  
  /* Glitch Shadow Variant Skin */
  .skin-glitchShadowVariant {
    background: #333 !important; /* Dark grey */
    border: 2px solid #555 !important;
    box-shadow: 0 0 5px #ff00ff, 0 0 8px #ff00ff inset !important; /* Magenta glitchy glow */
    /* You could add a subtle animation for a "glitch" effect here too */
    animation: glitch-effect 0.5s infinite alternate; 
  }
  
  @keyframes glitch-effect {
    0% { transform: translateX(0px) skewX(0deg); opacity: 1;}
    25% { transform: translateX(-1px) skewX(0.5deg); opacity: 0.95;}
    50% { transform: translateX(1px) skewX(-0.5deg); opacity: 1;}
    75% { transform: translateX(-0.5px) skewX(0.2deg); opacity: 0.9;}
    100% { transform: translateX(0px) skewX(0deg); opacity: 1;}
  }
  
  .falling {
    position: absolute;
    width: 30px;
    height: 30px;
    background: gold;
    border-radius: 50%;
    top: 0;
  }
  
  #score {
    font-size: 18px;
    color: #fff;
    transition: transform 0.1s ease-out, color 0.1s ease-out;
  }
  
  #score.score-updated {
    animation: scoreUpdateAnimation 0.3s ease-out;
  }
  
  @keyframes scoreUpdateAnimation {
    0% { transform: scale(1); color: #fff; }
    50% { transform: scale(1.3); color: #FFD700; } /* Scale up and turn gold */
    100% { transform: scale(1); color: #fff; }
  }
  
  #menu {
    text-align: center;
    width: 90%;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
    padding-bottom: 20px;
  }
  
  #start-btn, #shop-btn {
    padding: 10px 20px;
    font-size: 18px;
    margin-top: 20px;
    cursor: pointer;
    background-color: #00ffcc;
    color: #000;
    border: none;
    border-radius: 5px;
    transition: background-color 0.2s, transform 0.1s ease;
    display: inline-block;
    margin-left: 5px;
    margin-right: 5px;
  }
  
  #start-btn:hover, #shop-btn:hover {
    background-color: #00ddb3;
    transform: scale(1.05);
  }
  
  #start-btn:active, #shop-btn:active {
    transform: scale(1);
  }
  
  .bomb {
    background: red;
    box-shadow: 0 0 10px red;
  }
  .powerup {
    width: 30px;
    height: 30px;
    position: absolute;
    top: 0;
    border-radius: 50%;
    animation: pulse 1s infinite;
  }
  
  .powerup.slow {
    background: cyan;
    box-shadow: 0 0 8px cyan;
  }
  
  .powerup.magnet {
    background: violet;
    box-shadow: 0 0 8px violet;
  }
  
  .powerup.double {
    background: lime;
    box-shadow: 0 0 8px lime;
  }
  
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }
  #level {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 18px;
    color: #fff;
  }
  .fast-bomb {
    background: darkred;
    box-shadow: 0 0 10px crimson;
  }
    #level-up {
      font-size: 18px;
      color: #fff;
      transition: transform 0.3s ease, text-shadow 0.3s ease;
      z-index: 20;
    }
  
  .level-boost {
    transform: scale(2.5);
    text-shadow: 0 0 20px #00ffcc, 0 0 40px #00ffcc;
  }
  .explosion {
    width: 40px;
    height: 40px;
    position: absolute;
    background: orange;
    border-radius: 50%;
    box-shadow: 0 0 20px red, 0 0 40px orange;
    animation: explode 0.4s ease-out forwards;
    pointer-events: none;
    z-index: 999;
  }
  
  @keyframes explode {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    100% {
      transform: scale(3);
      opacity: 0;
    }
  }
  .shake {
    animation: screen-shake 0.3s ease;
  }
  
  @keyframes screen-shake {
    0% { transform: translate(0px, 0px); }
    25% { transform: translate(-5px, 5px); }
    50% { transform: translate(5px, -5px); }
    75% { transform: translate(-5px, 0px); }
    100% { transform: translate(0px, 0px); }
  }
  #drone {
    position: absolute;
    top: 40px; /* stays just below level text */
    left: 50%; /* center horizontally */
    transform: translateX(-50%); /* offset width to truly center */
    width: 60px;
    height: 40px;
    background: #ff0044;
    border-radius: 8px;
    box-shadow: 0 0 10px red;
    display: none;
    z-index: 10;
  }
  
  
  .bullet {
    position: absolute;
    width: 8px;
    height: 20px;
    background: rgb(255, 0, 0);
    border-radius: 2px;
    top: 40px;
    box-shadow: 0 0 8px yellow, 0 0 15px red;
    animation: pulse-glow 0.6s infinite alternate;
    z-index: 5;
  }
  
  @keyframes pulse-glow {
    0% {
      box-shadow: 0 0 5px yellow, 0 0 10px red;
    }
    100% {
      box-shadow: 0 0 10px yellow, 0 0 20px red;
    }
  }
  #hearts {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 100;
    display: flex;
    gap: 6px;
  }
  
  .heart {
    width: 24px;
    height: 24px;
    filter: drop-shadow(0 0 4px red);
  }
  #streak-popup {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    display: none;
    z-index: 20;
  }
  
  #streak-main {
    font-size: 40px;
    font-weight: bold;
    color: gold;
    text-shadow: 0 0 10px orange, 0 0 20px red;
    opacity: 0;
    animation: streak-pop 0.6s ease forwards;
  }
  
  #streak-sub {
    font-size: 20px;
    font-weight: bold;
    color: #ffaa00;
    text-shadow: 0 0 8px orange;
    margin-top: 5px;
  }
  #lose-streak {
    position: absolute;
    top: 62%;
    left: 67%;
    transform: translate(-50%, -50%);
    display: none;
    z-index: 20;
    pointer-events: none;
    text-align: center;
  }
  #lose-streak-inner {
    font-size: 32px;
    font-weight: bold;
    color: red;
    text-shadow: 0 0 8px darkred;
    opacity: 0;
    animation: lose-pop 0.5s ease forwards;
  }
  
  
  @keyframes streak-pop {
    0%   { transform: scale(0.5); opacity: 0; }
    50%  { transform: scale(1.2); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
  }
  @keyframes lose-pop {
    0%   { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
    50%  { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
    100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  }
  
  @keyframes heart-pop {
    0%   { transform: scale(1); opacity: 1; }
    40%  { transform: scale(2); opacity: 1; }
    100% { transform: scale(1); opacity: 0.2; }
  }
  
  @keyframes heart-gain-keyframe {
    0%   { transform: scale(1); filter: drop-shadow(0 0 4px red) brightness(1); }
    50%  { transform: scale(1.4); filter: drop-shadow(0 0 8px hotpink) brightness(1.75); }
    100% { transform: scale(1); filter: drop-shadow(0 0 4px red) brightness(1); }
  }
  
  .heart.pop {
    animation: heart-pop 0.5s ease;
    z-index: 99;
  }
  
  .heart.gained-animation {
    animation: heart-gain-keyframe 0.4s ease-out;
    /* Ensure it's visible during animation if other hearts overlap */
    z-index: 99; 
  }
  
  #heart-popup {
    position: absolute;
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 24px;
    font-weight: bold;
    color: red;
    text-shadow: 0 0 8px darkred;
    display: block;
    z-index: 30;
    opacity: 0;
    pointer-events: none;
  }
  #heart-popup.one-left {
    font-size: 34px;
    color: #ff0000;
    text-shadow: 0 0 12px #ff4444, 0 0 18px #ff0000;
  }
  @keyframes heart-popup {
    0%   { opacity: 0; transform: translateX(-50%) scale(0.8); }
    50%  { opacity: 1; transform: translateX(-50%) scale(1.2); }
    100% { opacity: 0; transform: translateX(-50%) scale(1); }
  }
  .powerup.heart {
    background: none;
    background-image: url('heartimage.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    width: 32px;
    height: 32px;
    border-radius: 0 ;
    animation: pulse 1.2s infinite;
  
    /* 🔥 Stronger glow + blend mode */
    box-shadow: 0 0 20px 6px red, 0 0 40px 12px crimson, 0 0 60px 16px hotpink;
    filter: brightness(2.5) saturate(2);
    mix-blend-mode: screen;
  }
  
  .heart-gain-popup {
    position: absolute;
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 28px;
    font-weight: bold;
    color: #ff5555;
    text-shadow: 0 0 6px red, 0 0 12px darkred;
    animation: heartGainPop 1s ease forwards;
    z-index: 100;
    pointer-events: none;
  }
  
  @keyframes fade-pop {
    0% { transform: translate(-50%, 0) scale(1); opacity: 0; }
    50% { transform: translate(-50%, -15px) scale(1.3); opacity: 1; }
    100% { transform: translate(-50%, -30px) scale(1); opacity: 0; }
  }
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.15); }
    100% { transform: scale(1); }
  }
  @keyframes heartGainPop {
    0% {
      opacity: 0;
      transform: translateX(-50%) scale(0.8);
    }
    50% {
      opacity: 1;
      transform: translateX(-50%) scale(1.3);
    }
    100% {
      opacity: 0;
      transform: translateX(-50%) scale(1);
    }
  }
  #powerup-bar {
    width: 500px; /* Ensure it matches game width */
    margin-left: auto; /* Center it */
    margin-right: auto; /* Center it */
    display: flex;
    justify-content: left;
    align-items: center;
    gap: 12px;
    height: 40px; /* 👈 LOCKED HEIGHT */
    margin-bottom: 10px;
    position: relative;
    font-size: 18px;
    color: #fffa;
    text-shadow: 0 0 4px #000;
  }
  #powerup-label {
    font-size: 18px;
    font-weight: bold;
    color: #00ffff;
    text-shadow: 0 0 4px cyan;
    margin-right: 6px;
  }
  
  #powerup-icons {
    display: flex;
    gap: 8px;
    min-height: 32px; /* 👈 Reserve space */
    align-items: center;
  }
  .powerup-icon {
    font-size: 16px;
    padding: 4px 10px;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    text-shadow: 0 0 4px black;
    font-weight: bold;
    animation: pulse 1.2s infinite;
    display: flex;
    gap: 6px;
    min-height: 32px; /* 👈 Force spacing for icons even when empty */
    align-items: center;
  }
  .powerup-icon.slow {
    background: rgba(77, 195, 255, 0.3);
    color: #4dc3ff;
  }
  
  .powerup-icon.magnet {
    background: rgba(255, 128, 176, 0.3);
    color: #ff80b0;
  }
  
  .powerup-icon.double {
    background: rgba(255, 238, 85, 0.3);
    color: #ffee55;
  }
  
  .boss {
      position: absolute;
      width: 60px;
      height: 60px;
      z-index: 10;
  }
  
  .boss-1 {
      background: linear-gradient(45deg, #ff0000, #ff4444);
      border-radius: 10px;
      box-shadow: 0 0 20px red, 0 0 40px #ff0000;
      animation: pulse 0.8s infinite;
  }
  
  .boss-2 {
      background: linear-gradient(45deg, #0000ff, #4444ff);
      border-radius: 50%;
      box-shadow: 0 0 20px blue, 0 0 40px #0000ff;
      animation: rotate 2s linear infinite, pulse 1.2s infinite;
  }
  
  .boss-bullet {
      position: absolute;
      width: 12px;
      height: 24px;
      background: linear-gradient(to bottom, #ff0000, #ff4444);
      border-radius: 6px;
      box-shadow: 0 0 10px red, 0 0 20px #ff0000;
  }
  
  @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
  }
  
  #boss-warning {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: none;
    z-index: 20;
    pointer-events: none;
    text-align: center;
  }
  
  #boss-warning-inner {
    font-size: 48px;
    font-weight: bold;
    color: #ff4444;
    text-shadow: 0 0 10px red, 0 0 20px darkred, 0 0 30px #ff0000;
    opacity: 0;
    animation: boss-warning 2s ease forwards;
  }
  
  @keyframes boss-warning {
    0%   { opacity: 0; transform: scale(0.5); }
    20%  { opacity: 1; transform: scale(1.2); }
    80%  { opacity: 1; transform: scale(1.2); }
    100% { opacity: 0; transform: scale(1); }
  }
  
  @keyframes powerupPopupAnimation {
    0% { opacity: 0; transform: translate(-50%, -30%) scale(0.8); }
    40% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); } /* Faster to peak */
    100% { opacity: 0; transform: translate(-50%, -70%) scale(0.8); } /* Fade out quickly */
  }
  
  #powerup-activation-popup {
    position: absolute;
    top: 25%;
    left: 50%;
    transform: translate(-50%, -50%); 
    font-size: 30px; 
    font-weight: bold;
    z-index: 1001;
    opacity: 0; 
    pointer-events: none;
    text-shadow: 
      0 0 8px rgba(0,0,0,0.9), 
      0 0 12px rgba(0,0,0,0.7), 
      2px 2px 5px rgba(0,0,0,0.5);
  }
  
  #powerup-activation-popup.show {
    animation: powerupPopupAnimation 0.75s ease-out forwards;
  }
  
  #powerup-activation-popup.slow {
    color: #00FFFF;
  }
  
  #powerup-activation-popup.magnet {
    color: #EE82EE;
  }
  
  #powerup-activation-popup.double {
    color: #32CD32;
  }
  
  #level-transition-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* background-color: rgba(0, 0, 0, 0.75); Semi-transparent for the main overlay content */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s ease-in-out;
  }
  
  #level-transition-overlay::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw; /* Cover full viewport width */
    height: 100vh; /* Cover full viewport height */
    background-color: rgba(0, 0, 0, 1); /* Fully opaque black */
    z-index: -1; /* Behind the overlay's text content */
  }
  
  #level-transition-overlay.show {
    opacity: 1;
    pointer-events: auto;
  }
  
  #level-transition-text {
    color: #00ffcc;
    font-size: 48px;
    font-weight: bold;
    text-align: center;
    text-shadow: 0 0 15px #00ffcc, 0 0 25px #00ffcc;
    animation: pulseText 1.5s infinite alternate ease-in-out;
  }
  
  @keyframes pulseText {
    0% { transform: scale(0.95); opacity: 0.8; }
    100% { transform: scale(1.05); opacity: 1; }
  }
  
  
  /* Rule to show GOS and elevate its z-index */
  
  #live-high-score-display {
    font-size: 18px;
    color: #FFD700;
  }
  
  #live-coin-bank {
    font-size: 18px;
    color: #FFD700;
    transition: transform 0.1s ease-out, color 0.1s ease-out;
  }
  
  #live-coin-bank.coin-updated {
    animation: coinUpdateAnimation 0.3s ease-out;
  }
  
  @keyframes coinUpdateAnimation {
    0% { transform: scale(1); color: #FFD700; }
    50% { transform: scale(1.3); color: #FFFACD; }
    100% { transform: scale(1); color: #FFD700; }
  }
  
  #new-high-score-popup {
    position: absolute;
    top: 40%; 
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 10px 20px;
    background: linear-gradient(45deg, rgba(255, 215, 0, 0.8), rgba(255, 165, 0, 0.8));
    color: white;
    font-size: 24px;
    font-weight: bold;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.7);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.5), 0 0 15px rgba(255, 165, 0, 0.3);
    z-index: 1003; 
    opacity: 0;
    pointer-events: none; 
    transition: opacity 0.3s ease-out;
  }
  
  #new-high-score-popup.show {
    animation: newHighScorePopupAnimation 1s ease-out forwards;
  }
  
  @keyframes newHighScorePopupAnimation {
    0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
    20% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; } 
    80% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; } 
    100% { transform: translate(-50%, -50%) scale(1.0); opacity: 0; } 
  }
  
  .fading-out-object {
    transition: opacity 0.4s ease-out;
    opacity: 0 !important;
    pointer-events: none;
  }
  
  /* --- Neon Grid Theme (Levels 11-20) --- */
  #game.game-theme-neon-grid {
    background: 
      repeating-linear-gradient(
        0deg,
        rgba(0, 255, 204, 0.35), /* Grid lines Y */
        rgba(0, 255, 204, 0.35),
        1px,
        transparent 1px,
        transparent 40px
      ),
      repeating-linear-gradient(
        90deg,
        rgba(0, 255, 204, 0.35), /* Grid lines X */
        rgba(0, 255, 204, 0.35),
        1px,
        transparent 1px,
        transparent 40px
      ),
      #0a031A; /* Base dark color */
    border-color: #00ffcc;
  }
  
  #game.game-theme-neon-grid .stars {
    display: none;
  }
  
  /* --- Floating Cities Theme (Levels 21-30) --- */
  #game.game-theme-sky-realm {
    background: linear-gradient(to bottom, #1f2c39 0%, #253544 60%, #1f2c39 100%);
    border-color: #3a4b5c;
    position: relative;
    overflow: hidden;
  }
  
  #game.game-theme-sky-realm .stars {
    display: none;
  }
  
  /* Add new elements for clouds and distant cities */
  .sky-element-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 0;
  }
  
  .sky-element {
    position: absolute;
    background-repeat: no-repeat;
    pointer-events: none;
  }
  
  /* Distant, slow-moving clouds - much fainter */
  .cloud-far {
    width: 300px; 
    height: 150px; 
    background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 300 150" xmlns="http://www.w3.org/2000/svg"><ellipse cx="150" cy="75" rx="100" ry="40" fill="rgba(80,90,110,0.05)"/><ellipse cx="100" cy="65" rx="80" ry="30" fill="rgba(90,100,120,0.07)"/><ellipse cx="200" cy="85" rx="70" ry="25" fill="rgba(70,80,100,0.05)"/></svg>');
    bottom: 60%; 
    opacity: 0.25;
    animation: moveCloudFar 180s linear infinite;
  }
  
  /* Nearer, slightly faster clouds - much fainter */
  .cloud-near {
    width: 250px; 
    height: 120px; 
    background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 250 120" xmlns="http://www.w3.org/2000/svg"><ellipse cx="125" cy="60" rx="90" ry="35" fill="rgba(100,110,130,0.1)"/><ellipse cx="80" cy="55" rx="70" ry="25" fill="rgba(110,120,140,0.12)"/><ellipse cx="170" cy="65" rx="60" ry="20" fill="rgba(90,100,120,0.1)"/></svg>');
    bottom: 40%;
    opacity: 0.35;
    animation: moveCloudNear 90s linear infinite;
  }
  
  /* Silhouette of distant floating cities/structures - much fainter */
  .floating-city {
    width: 150px; 
    height: 200px;
    background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 150 200" xmlns="http://www.w3.org/2000/svg"><path d="M20,190 L20,100 Q25,80 50,80 L100,80 Q125,80 130,100 L130,190 Z" fill="rgba(30,40,50,0.15)"/><path d="M30,180 L30,120 Q35,100 60,100 L90,100 Q115,100 120,120 L120,180 Z" fill="rgba(40,50,60,0.2)"/><rect x="50" y="50" width="50" height="30" fill="rgba(50,60,70,0.2)" rx="5"/><rect x="60" y="20" width="30" height="30" fill="rgba(60,70,80,0.15)" rx="3"/></svg>');
    bottom: 10%; 
    opacity: 0.2;
    animation: swayCity 45s ease-in-out infinite alternate;
  }
  
  @keyframes moveCloudFar {
    0% { transform: translateX(0px); }
    100% { transform: translateX(700px); }
  }
  
  @keyframes moveCloudNear {
    0%   { transform: translateX(-250px) translateY(10px) scale(0.9); }
    50%  { transform: translateX(calc(500px + 50px)) translateY(0px) scale(1); }
    50.01% { transform: translateX(-250px) translateY(-5px) scale(0.95); }
    100% { transform: translateX(calc(500px + 50px)) translateY(5px) scale(1.05); }
  }
  
  @keyframes swayCity {
    0%   { transform: translateX(0px) translateY(0px) rotate(-1deg); }
    100% { transform: translateX(10px) translateY(-5px) rotate(1deg); }
  }
  
  /* Real-Time Stats Panel */
  #real-time-stats {
    width: calc(100% - 40px);
    margin: 20px auto 0 auto;
    padding: 15px;
    background-color: rgba(0, 20, 30, 0.65);
    border: 1px solid #00ffcc;
    border-radius: 8px;
    box-shadow: 0 0 10px #00ffcc, 0 0 15px rgba(0, 255, 204, 0.3) inset;
    color: #e0e0e0;
    text-align: left;
    font-size: 14px;
  }
  
  #real-time-stats h2 {
    font-size: 16px;
    color: #00ffcc;
    text-shadow: 0 0 5px #00ffcc;
    margin-bottom: 10px;
    text-align: center;
  }
  
  #real-time-stats p {
    margin-bottom: 5px;
    line-height: 1.4;
  }
  
  #real-time-stats p span {
    color: #ffffff;
    font-weight: bold;
  }
  
  /* Style for the new Main Menu button on game over screen */
  #main-menu-btn {
    padding: 15px 30px; 
    font-size: 20px; 
    cursor: pointer;
    background-color: #555;
    color: #fff;
    border: none;
    border-radius: 8px; 
    transition: background-color 0.2s, transform 0.1s ease;
    font-weight: bold;
    margin-top: 10px;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }
  
  #main-menu-btn:hover {
    background-color: #777;
    transform: scale(1.05);
  }
  
  #main-menu-btn:active {
    transform: scale(1);
  }
  
  /* Shop Screen Styles */
  #shop-screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(10, 10, 20, 0.95);
    color: #e0e0e0;
    padding: 20px;
    box-sizing: border-box;
    z-index: 1500;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow-y: auto;
  }
  
  #shop-screen h1 {
    color: #00ffcc;
    text-shadow: 0 0 10px #00ffcc;
    margin-bottom: 20px;
  }
  
  #back-to-menu-btn {
    font-size: 18px;
    color: #e0e0e0;
    margin-bottom: 15px;
    padding: 8px 15px;
    background-color: rgba(0, 30, 40, 0.7);
    border: 1px solid #00ffcc;
    border-radius: 5px;
    box-shadow: 0 0 5px rgba(0, 255, 204, 0.2);
    cursor: pointer;
    transition: background-color 0.2s;
  }
  #back-to-menu-btn:hover {
    background-color: #14cdd3;
  }
  
  .shop-section {
    background-color: rgba(0, 20, 30, 0.65);
    border: 1px solid #00ffcc;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
    width: 90%;
    max-width: 600px;
    box-shadow: 0 0 8px rgba(0, 255, 204, 0.2);
  }
  
  .shop-section h2 {
    color: #00ffcc;
    text-shadow: 0 0 5px #00ffcc;
    margin-bottom: 15px;
    border-bottom: 1px solid #008060;
    padding-bottom: 5px;
  }
  
  /* Styles for items within ANY shop section that uses this structure */
  .shop-item {
    display: flex;
    flex-direction: row; 
    justify-content: space-between; 
    align-items: center; 
    padding: 15px;
    border-bottom: 1px solid rgba(0, 255, 204, 0.1);
  }
  
  .shop-item:last-child {
    border-bottom: none;
  }
  
  .shop-item .item-details-left {
    display: flex;
    flex-direction: column; 
    align-items: flex-start;
    margin-right: 15px; 
    flex-grow: 1; 
  }
  
  /* General styling for item names within any shop item */
  .shop-item .item-details-left .item-name {
    font-size: 1.1em;
    font-weight: bold;
    color: #00ffcc; 
    margin-bottom: 5px; 
  }
  
  /* General styling for item descriptions within any shop item */
  .shop-item .item-details-left .item-description {
    font-size: 0.95em;
    color: #eee;
    margin-bottom: 0; 
    line-height: 1.4; 
  }
  
  .shop-item .shop-action-btn {
    padding: 10px 18px; 
    font-size: 15px;
    flex-shrink: 0;
  }
  
  /* Remove the old Combo & Coin Bonuses specific selectors if they are now redundant */
  /* For example, if #combo-coin-bonuses-section .shop-item .item-name is now fully covered by the general rule above, */
  /* it can be removed to avoid specificity issues or duplication. For now, I'll leave them, */
  /* but this is a cleanup step you might consider later. */
  
  /* Base style for all shop action buttons */
  .shop-item .shop-action-btn {
    padding: 8px 15px;
    font-size: 14px;
    font-weight: bold;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.2s ease, color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
    text-align: center;
    min-width: 170px;
    box-sizing: border-box;
    height: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Buy Button Style */
  .shop-item .shop-action-btn.action-buy {
    background-color: #00ffcc;
    color: #000;
    box-shadow: 0 0 5px #00ffcc, 0 0 8px #00ffcc;
  }
  .shop-item .shop-action-btn.action-buy:hover {
    background-color: #00ddb3;
    box-shadow: 0 0 8px #00ffcc, 0 0 12px #00ffcc;
    transform: scale(1.05);
  }
  
  /* Equip Button Style */
  .shop-item .shop-action-btn.action-equip {
    background-color: #6bff6b;
    color: #000;
    box-shadow: 0 0 5px #6bff6b, 0 0 8px #6bff6b;
  }
  .shop-item .shop-action-btn.action-equip:hover {
    background-color: #59e859;
    box-shadow: 0 0 8px #6bff6b, 0 0 12px #6bff6b;
    transform: scale(1.05);
  }
  
  /* Unequip Button Style */
  .shop-item .shop-action-btn.action-unequip {
    background-color: #ffb86c;
    color: #000;
    box-shadow: 0 0 5px #ffb86c, 0 0 8px #ffb86c;
  }
  .shop-item .shop-action-btn.action-unequip:hover {
    background-color: #ffa74d;
    box-shadow: 0 0 8px #ffb86c, 0 0 12px #ffb86c;
    transform: scale(1.05);
  }
  
  /* Disabled state for buttons (e.g., if an item is already 'Equipped' and we make it disabled) */
  .shop-item .shop-action-btn:disabled {
    background-color: #555;
    color: #888;
    box-shadow: none;
    cursor: not-allowed;
    transform: scale(1);
  }
  
  /* Placeholder for locked/equipped status - will be dynamic via JS */
  .shop-item .status-locked {
    color: #ff6b6b;
  }
  .shop-item .status-unlocked {
    color: #6bff6b;
  }
  .shop-item .status-equipped {
    color: #00ffcc;
    font-weight: bold;
  }
  
  /* Shop Current Coin Bank Display */
  #shop-current-coin-bank {
    font-size: 18px;
    color: #e0e0e0;
    margin-bottom: 15px;
    padding: 8px 15px;
    background-color: rgba(0, 30, 40, 0.7);
    border: 1px solid #00ffcc;
    border-radius: 5px;
    box-shadow: 0 0 5px rgba(0, 255, 204, 0.2);
  }
  #shop-current-coin-bank .shop-coin-value {
    color: #FFD700;
    font-weight: bold;
  }
  
  /* Shop Message Popup */
  #shop-message-popup {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 25px;
    background-color: rgba(10, 20, 25, 0.85);
    border: 1px solid #00ffcc;
    border-radius: 5px;
    color: #00ffcc;
    font-size: 16px;
    font-weight: bold;
    text-shadow: 0 0 5px #00ffcc, 0 0 8px #00ffcc;
    z-index: 1600;
    opacity: 0;
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
    pointer-events: none;
  }
  
  #shop-message-popup.show {
    opacity: 1;
    transform: translateX(-50%) translateY(-10px);
    pointer-events: auto;
  }
  
  #shop-message-popup.error {
    color: #ff6b6b;
    border-color: #ff6b6b;
    text-shadow: 0 0 5px #ff6b6b, 0 0 8px #ff6b6b;
  }
  
  #shop-message-popup.success {
    color: #6bff6b;
    border-color: #6bff6b;
    text-shadow: 0 0 5px #6bff6b, 0 0 8px #6bff6b;
  }
  
  /* Shop Item Preview HUD */
  #shop-item-preview-hud {
    background-color: rgba(10, 20, 30, 0.75);
    border: 1px solid #00a080;
    border-radius: 8px;
    padding: 20px;
    margin-top: 20px;
    margin-bottom: 20px;
    width: 90%;
    max-width: 400px;
    text-align: center;
    box-shadow: 0 0 10px rgba(0, 160, 128, 0.4);
  }
  
  #shop-item-preview-hud h3 {
    color: #00e0b0;
    text-shadow: 0 0 6px #00e0b0;
    margin-bottom: 15px;
    font-size: 18px;
  }
  
  #shop-player-preview-element {
    width: 80px;
    height: 20px;
    background: #00ffcc;
    border-radius: 5px;
    transition: background 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
    margin: 0 auto;
    border: 1px solid #00ffcc;
  }
  
  /* Styling for the new Preview button */
  .shop-preview-btn {
    padding: 8px 12px;
    font-size: 14px;
    font-weight: bold;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.2s ease, color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
    text-align: center;
    min-width: 80px; 
    background-color: #ff9900; 
    color: #000;
    box-shadow: 0 0 5px #ff9900, 0 0 8px #ff9900;
    margin-right: 12px;
    height: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box; 
  }
  
  .shop-preview-btn:hover {
    background-color: #ffad33;
    box-shadow: 0 0 8px #ff9900, 0 0 12px #ff9900;
    transform: scale(1.05);
  }
  
  .shop-item div {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    flex-basis: 40%;
  }
  
  /* --- Trail Effects --- */
  .trail-particle {
    position: absolute;
    pointer-events: none;
    z-index: 1;
    border-radius: 50%;
  }
  
  /* Fire Sparks */
  .trail-fire-spark {
    width: 4px;
    height: 4px;
    background-color: #ff4500;
    box-shadow: 0 0 3px #ff6347, 0 0 5px #ff8c00, 0 0 7px #ffd700;
    animation: fireSparkAnimation 0.6s ease-out forwards;
  }
  
  @keyframes fireSparkAnimation {
    0% {
      opacity: 1;
      transform: translateY(0) translateX(0) scale(1.2);
    }
    50% {
      opacity: 0.8;
      transform: translateY(-10px) translateX(calc(var(--random-xs, 0) * 5px)) scale(0.8);
    }
    100% {
      opacity: 0;
      transform: translateY(-25px) translateX(calc(var(--random-xl, 0) * 10px)) scale(0.3);
    }
  }
  
  /* Digital Line Trail */
  .trail-digital-line {
    width: 15px;
    height: 3px;
    background-color: #00ffff;
    box-shadow: 0 0 5px #00ffff, 0 0 8px #00dddd;
    border-radius: 2px;
    animation: digitalLineAnimation 0.4s linear forwards;
  }
  
  @keyframes digitalLineAnimation {
    0% {
      opacity: 0.8;
      transform: scaleX(1);
    }
    100% {
      opacity: 0;
      transform: scaleX(0.2);
    }
  }
  
  /* Electric Static */
  .trail-electric-static {
    width: 2px;
    height: 8px;
    background-color: #00ffff;
    box-shadow: 0 0 4px #00ffff, 0 0 6px #ffffff, 0 0 8px #7fffd4;
    border-radius: 1px;
    animation: electricStaticAnimation 0.25s linear forwards;
  }
  
  @keyframes electricStaticAnimation {
    0% {
      opacity: 1;
      transform: scaleY(1) scaleX(1) translateX(0) rotate(0deg);
      transform: scaleY(1) scaleX(1) translateX(calc(var(--random-xs, 0) * 3px)) rotate(calc(var(--random-angle, 0) * 1deg));
    }
    30% {
      opacity: 0.6;
      transform: scaleY(0.8) scaleX(1.2) translateX(calc(var(--random-xs, 0) * -3px)) rotate(calc(var(--random-angle, 0) * 0.5deg));
    }
    60% {
      opacity: 0.9;
      transform: scaleY(1.1) scaleX(0.9) translateX(calc(var(--random-xs, 0) * 2px)) rotate(calc(var(--random-angle, 0) * 1.5deg));
    }
    100% {
      opacity: 0;
      transform: scaleY(0.5) scaleX(0.5) translateX(calc(var(--random-xs, 0) * -2px)) rotate(calc(var(--random-angle, 0) * 2deg));
    }
  }
  
  /* New styles for Power-Up Upgrades section */
  .powerup-category {
    margin-bottom: 25px;
    padding: 15px;
    border: 1px solid #00ffff40;
    border-radius: 8px;
    background-color: rgba(0, 20, 30, 0.5);
  }
  
  .powerup-category h3 {
    color: #00ffcc;
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.1em;
    border-bottom: 1px solid #00ffcc40;
    padding-bottom: 10px;
  }
  
  /* Adjust shop item within powerup category if needed */
  .powerup-category .shop-item {
    background-color: rgba(0, 30, 40, 0.6);
  }
  
  /* Styles specific to Combo & Coin Bonuses Section Items */
  #combo-coin-bonuses-section .shop-item {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: 15px; 
  }
  
  #combo-coin-bonuses-section .shop-item .item-details-left {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    margin-right: 15px;
    flex-grow: 1;
  }
  
  #combo-coin-bonuses-section .shop-item .item-name {
    font-size: 1.1em;
    font-weight: bold;
    color: #00ffcc; 
    margin-bottom: 5px; 
  }
  
  #combo-coin-bonuses-section .shop-item .item-cost-display {
    font-size: 0.9em;
    color: #FFD700; 
    margin-bottom: 8px; 
    display: inline; 
  }
  
  #combo-coin-bonuses-section .shop-item .item-description {
    font-size: 0.95em;
    color: #eee;
    margin-bottom: 0;
    line-height: 1.4; 
  }
  
  #combo-coin-bonuses-section .shop-item .shop-action-btn {
    padding: 10px 18px; 
    font-size: 15px;
    flex-shrink: 0;
  }
  
  /* Styling for the new Instructions Container directly in the main menu */
  #main-menu-instructions {
    text-align: left; 
    width: 100%;
    max-width: 480px;
    margin: 30px auto 0 auto;
    padding: 15px;
    background-color: rgba(0, 20, 30, 0.5);
    border: 1px solid #008060;
    border-radius: 8px;
  }
  
  #main-menu-instructions h2 {
    color: #00ffcc;
    text-shadow: 0 0 8px #00ffcc;
    text-align: center;
    margin-bottom: 20px;
    font-size: 1.6em;
  }
  
  #main-menu-instructions .instructions-section h3 {
    color: #00e0b0;
    font-size: 1.2em;
    margin-bottom: 8px;
    border-bottom: 1px solid #008060;
    padding-bottom: 4px;
  }
  
  #main-menu-instructions .instructions-section p,
  #main-menu-instructions .instructions-section li {
    font-size: 0.9em;
    line-height: 1.5;
    color: #ccc; 
    margin-bottom: 6px;
  }
  
  #main-menu-instructions .instructions-section ul {
    list-style-type: disc; 
    padding-left: 20px; 
  }
  
  #main-menu-instructions .instructions-section strong {
    color: #00ffcc; 
  }
  
  #main-menu-instructions .instructions-section em {
    color: #ffab00; 
  }
  
  /* Ensure .hidden utility class is available if used elsewhere, but not needed for instructions now */
  /* .hidden { display: none !important; } */
  
  #shop-screen, #game-wrapper, #level-transition-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
  }
  
  #shop-screen {
      z-index: 1500; 
      background-color: rgba(10, 10, 20, 0.95);
  }
  #game-wrapper {
      z-index: 100;
  }
  
  #game-over-screen {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: radial-gradient(circle at center, rgba(0, 255, 204, 0.151) 0%, rgba(0, 255, 204, 0.04) 100%), 
                rgba(0, 0, 0, 0.85);
    padding: 40px 50px;
    border-radius: 20px;
    box-shadow:
      0 0 20px #00ffcc,
      0 0 40px #00ffcc,
      0 0 80px #00ffcc;
    color: white;
    text-align: center;
    z-index: 9999;
    max-width: 90vw;
    width: 400px;
  }
  #game-over-screen h1 {
    color: #00ffcc;
    font-size: 36px;
    margin-bottom: 20px;
    text-shadow: 0 0 10px #00ffcc, 0 0 20px #00ffcc;
  }
  #game-over-screen p {
    font-size: 20px;
    margin-bottom: 20px;
    color: #eee;
  }
  #game-over-screen button {
    padding: 12px 28px;
    font-size: 18px;
    font-weight: bold;
    border-radius: 10px;
    border: none;
    margin: 10px;
    background-color: #00ffcc;
    color: black;
    cursor: pointer;
    transition: background-color 0.2s, transform 0.2s;
  }
  #game-over-screen button:hover {
    background-color: #00ddb3;
    transform: scale(1.05);
  }
  body.game-is-over #game-over-screen {
    display: block;
  }
  .game-over-screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin-top: 20px;
  }
  .game-over-buttons {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin-top: 20px;
  }/* Bump up start section size */
  /* Slightly smaller scale than before (around 35% bigger instead of 50%) */
  /* Slightly smaller scale than before (around 35% bigger instead of 50%) */
  /* 🔹 Main menu block scale – now only ~1.2x instead of 1.35x */
  #menu {
    margin-top: 30px;
    transform: scale(1.2);
    transform-origin: top center;
  }
  
  /* 🔹 Buttons padding slightly reduced */
  #start-btn, #shop-btn {
    padding: 10px 22px;
    font-size: 18px;
  }
  
  /* 🔹 All Game Stats box – consistent width */
  #real-time-stats {
    transform: none;
    margin-top: 30px;
    width: 100%;
    max-width: 500px;         /* ← MATCHING WIDTH */
    margin-left: auto;
    margin-right: auto;
  }
  
  /* 🔹 How to Play box – same max-width */
  #main-menu-instructions {
    margin-top: 50px;
    padding: 20px;
    width: 100%;
    max-width: 500px;         /* ← SAME WIDTH AS STATS */
    margin-left: auto;
    margin-right: auto;
    font-size: 15px;
  }
  
  /* Optional small font tuning */
  #main-menu-instructions h2 {
    font-size: 24px;
  }
  
  #main-menu-instructions h3 {
    font-size: 18px;
  }
  
  #main-menu-instructions p,
  #main-menu-instructions li {
    font-size: 14.5px;
  }
  
/* In-Game Buttons Styling */
.ingame-button {
  width: 140px;
  text-align: center;
  padding: 10px 20px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  background-color: #00ffcc;
  color: #000;
  border: none;
  border-radius: 5px;
  text-shadow: 0 0 3px rgba(0,0,0,0.5);
  transition: background-color 0.2s, transform 0.1s ease;
}

.ingame-button:hover {
  background-color: #00ddb3;
  transform: scale(1.05);
}

.ingame-button:active {
  transform: scale(1);
}

/* Countdown Timer Styling */
#countdown-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1001; /* Above game elements, below GOS if needed */
}

#countdown-text {
  font-size: 72px;
  color: #00ffcc;
  text-shadow: 0 0 15px #00ffcc, 0 0 25px #00ffcc;
  font-weight: bold;
  animation: countdown-pulse 1s infinite ease-in-out;
}

@keyframes countdown-pulse {
  0%, 100% { transform: scale(1); opacity: 0.8; }
  50% { transform: scale(1.1); opacity: 1; }
}
  
/* Make Score and Level text neon */
#score,
#level-up {
  color: #00ffcc; /* Neon color */
  text-shadow: 0 0 5px #00ffcc, 0 0 10px #00ffcc; /* Neon glow */
}
#side-buttons-container {
  display: flex;
  flex-direction: column; /* Stack buttons vertically */
  gap: 10px; /* Space between buttons */
}
  